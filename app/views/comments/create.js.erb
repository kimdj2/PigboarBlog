//コメント作成後の処理
<% if @comment.parent %>
  $comment_parent = $("#comment_list_<%= @comment.parent.id %>");
  $comment_form = $("#comment_list_<%= @comment.parent.id %> > form");
<% else %>
  $comment_parent = $(".comments-list");
  console.log($comment_parent);
<% end %>
$comments_count = $("#comments-count-of-commentable-<%= @commentable.id %>");
<% if @comment.errors.empty? %>
  $comments_count.html("<%= @commentable.comments.size %>").effect('highlight',{}, 500);
  $comment_parent.append("<%=j render @comment %>").find(".media").last().effect("highlight", { color: '#007bff' }, 500);
  <% if @comment.parent %>
    $comment_form[0].reset();
    $comment_form.remove();
    // console.log("start");
    $comment = $("#comment_<%= @comment.parent.id %>")
    // console.log("end");
    $restore_link = $comment.find('a.delete-comment-link')[0]
    $reply_link = $comment.find('a.reply-comment-link')[0]
    $reply_link.href = $restore_link.href + "/reply"
  <% end %>
  $("#comment_new_chars_counter").html("Remaining : 255");
<% else %>
  alert('コメントを入力してください。');
<% end %>
$('.ajax_loading').hide();