<% if @comment.errors.empty? %>
  $('.comments-list').find(".cancel-comment-link").click();
  $("#comment_list_<%= @comment.id %> > .comment-info .edit-comment-link").removeAttr("href");
  $("#comment_list_<%= @comment.id %> > .comment-info").after("<%=j render('comments/form', comment: @comment) %>");
    $('[data-provider="summernote2"]').each(function() {
    return $(this).summernote({
      lang: 'ja-JP',
      height: 200,
      codemirror: {
        lineWrapping: true,
        lineNumbers: true,
        tabSize: 2,
        theme: 'solarized'
      },
      callbacks: {
        onImageUpload: function(files) {
          return sendFile(files[0], $(this));
        }
      },
      toolbar: [['font', ['bold', 'underline', 'clear']], ['fontname', ['fontname']], ['color', ['color']], ['para', ['ul', 'ol', 'paragraph']], ['table', ['table']], ['insert', ['link']], ['view', ['help']], ['highlight', ['highlight']]]
    });
  });
<% else %>
  $("#comments-widget-of-commentable-<%= @commentable.id %> .comments-header").after("<div class='alert alert-warning alert-dismissible fade in' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><%= @comment.errors.full_messages.join('') %></div>").next().delay(1500).slideUp('fast');
<% end %>
$("#comment_<%= @comment.id %> form textarea").trigger('keyup');